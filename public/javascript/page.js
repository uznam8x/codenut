!function(t){"use strict";Codenut.$dom.on(Codenut.event.page.create,function(t){axios.post("/api/page/create",{path:t.param}).then(function(t){var e=Codenut.xml.get(t.data,"code").textContent;200===parseInt(e)&&Codenut.$dom.trigger({type:Codenut.event.nav.update})}).catch(function(t){console.log(t)})})}(jQuery),function(t){Codenut.$dom.on(Codenut.event.page.update,function(e){var n=Codenut.convert.h2x("body",t("#structure .sortable")[0]);axios.post("/api/page/update",{src:Codenut.page.src,structure:n.documentElement.outerHTML}).then(function(t){var e=Codenut.xml.get(t.data,"code").textContent;parseInt(e)}).catch(function(t){console.log(t)})})}(jQuery),function(t){"use strict";var e=new Vue({el:"#structure",data:{name:"structure",model:{}},methods:{show:function(e){var n=this;Codenut.page.src=e.param,axios.get("/api/page/show",{responseType:"text",params:{src:e.param}}).then(function(e){var o=Codenut.xml.get(e.data,"code").textContent;200===parseInt(o)&&(n.model=Codenut.xml.get(e.data,"data > body"),n.$forceUpdate(),t("iframe").attr("src","/page"+Codenut.page.src))}).catch(function(t){console.log(t)})},prompt:function(t){var e=prompt("Component Name","");e&&this.addChild(e)},view:function(t){},addChild:function(t){var e=Codenut.generate.element("",t);this.model.appendChild(e),this.$forceUpdate(),Codenut.$dom.trigger({type:Codenut.event.page.update})}}});Codenut.$dom.on(Codenut.event.tree.click.label,function(t){if("structure"!==t.name)return!1}),Codenut.$dom.on(Codenut.event.tree.update,function(t){if("structure"!==t.name)return!1;Codenut.$dom.trigger({type:Codenut.event.page.update})}),Codenut.$dom.on(Codenut.event.page.show,e.show)}(jQuery),function(){"use strict";Codenut.modal.controller.structure={data:{storage:{},attribute:[]},methods:{add:function(){this.attribute.push({key:"",value:""})},remove:function(){console.log("remove")},save:function(){var t=$(this.currentTarget).parent().find(".storage")[0],e=t.textContent,n=JSON.parse(e);for(var o in n)o.indexOf("codenut")>-1&&this.attribute.push({key:o,value:n[o]});for(var a={},u=0,r=this.attribute.length;u<r;u++)a[this.attribute[u].key]=this.attribute[u].value;t.textContent=JSON.stringify(a),Codenut.$dom.trigger({type:Codenut.event.page.update}),Codenut.modal.close(this.uuid)}},mounted:function(){$(this.currentTarget);var t=$(this.currentTarget).parent().find(".storage")[0].textContent,e=JSON.parse(t),n=[],o=[];for(var a in e)-1===a.indexOf("codenut")?n.push({key:a,value:e[a]}):o.push({key:a,value:e[a]});this.storage=o,this.attribute=n}}}();