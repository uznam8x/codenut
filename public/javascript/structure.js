!function(t){"use strict";Codenut.$dom.on(Codenut.event.setting.structure,function(e){var n=e.modal,o=e.el.parent().children("script")[0].textContent;o=JSON.parse(o);var a=t("#attribute-template")[0].innerHTML,c=Handlebars.compile(a),d={name:"structure",readonly:{},modify:{}};for(var r in o)r.indexOf("codenut")>-1?d.readonly[r]=o[r]:d.modify[r]=o[r];n.find(".modal__content").html(c({readonly:o})),n.find(".modal__footer").on("click",'[data-action="modal-close"]',function(t){n.find(".modal__footer").off("click"),Codenut.$dom.off("click",'[data-action="add-attribute"]'),Codenut.$dom.off("click",'[data-action="remove-attribute"]'),Codenut.$dom.off("click",'input[name="structure-all"]'),n.remove()}),n.find(".modal__footer").on("click",'[data-action="modal-save"]',function(e){var n={};t('input[name="structure"]:not(:disabled)').each(function(e,o){var a=t(o),c=a.closest("tr").find('input[name="key"]').val(),d=a.closest("tr").find('input[name="value"]').val();n[c]=d}),n["data-codenut-path"]=o["data-codenut-path"],n["data-codenut-uuid"]=o["data-codenut-uuid"],console.log(n)}),Codenut.$dom.on("click",'[data-action="add-structure"]',function(e){var o=t("#attribute-item-template")[0].innerHTML.replace(/{{name}}/g,"structure");n.find(".modal__content .table tbody").append(o)}),Codenut.$dom.on("click",'[data-action="remove-structure"]',function(e){t('input[name="structure"]:not(:disabled)').each(function(e,n){t(n).closest("tr").remove()})}),Codenut.$dom.on("click",'input[name="structure-all"]',function(e){var n=t('input[name="structure"]:not(:disabled)');t(this).prop("checked")?(n.attr("checked","checked"),n.prop("checked",!0)):(n.removeAttr("checked","checked"),n.prop("checked",!1))})})}(jQuery);